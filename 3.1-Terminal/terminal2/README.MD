Домашнее задание к занятию "3.2. Работа в терминале, лекция 2"

1. Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа; 
опишите ход своих мыслей, если считаете что она могла бы быть другого типа.

	Ответ:
	>type -t cd 
	builtin - Это встроенная команда оболочки и меняет текущую папку только для оболочки, в которой выполняется, 
	типы файлов: 
	- псевдоним (псевдоним оболочки)
	- функция (функция оболочки)
	- встроенный (встроенный в оболочку)
	- файл (файл на диске)
	- ключевое слово (зарезервированное слово оболочки)

	программы такой нет поэтому отпадает типы файл и псевдоним, 
	при выполнении команды вычислений не происходит, поэтому тип функция и ключевое слово тоже отпадают. 

2. Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l? 
man grep поможет в ответе на этот вопрос. Ознакомьтесь с документом о других подобных некорректных вариантах использования pipe.

	Ответ:
	wc -l - считает строчки,
	man grep -c, --count = Suppress normal output; instead print a count of matching lines for each input file.
	соответственно альтернативная замена без pipe будет
	>grep <some_string> <some_file> -c

3. Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?

	Ответ: 
	pstree -p |grep "(1)"
	systemd(1) 
	systemd — менеджер системы и служб для Linux, 
	systemd обеспечивает возможности агрессивной параллелизации и много всего прочего.
	
4. Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?

	Ответ:
	попробуем c помощью ls вывести содержание несуществующего каталога toor c пренаправление stderr в /dev/pts/1 
	>ls toor 2>/dev/pts/1
	вконсоли /dev/pts/1 получим: 
	>ls: cannot access 'toor': No such file or directory
	

5. Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл? Приведите работающий пример.

	Ответ: cat < stdin.file >stdout.file
	

6. Получится ли находясь в графическом режиме, вывести данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные?

	Ответ:
	Вывести сможем переключившись на tty Ctrl+Alt+F1 или через перенаправление в нужную консоль.

7. Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?

	Ответ:
	команда bash 5>&1 Создаст файл дескриптор с номером 5 и перенаправит его в stdout
	echo netology > /proc/$$/fd/5 - выведет netology, потому что мы делаем эхо строчки netology на stdout

8. Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty? 
Напоминаем: по умолчанию через pipe передается только stdout команды слева от | на stdin команды справа. 
Это можно сделать, поменяв стандартные потоки местами через промежуточный новый дескриптор, который вы научились создавать в предыдущем вопросе.

	Ответ:
	ls toor 5>&2 2>&1 1>&5 |grep such
	ls: cannot access 'toor': No such file or directory


9. Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?

	Ответ:
	Выведет переменные окружения, также можно вывести через команды >env или >printenv

10. Используя man, опишите что доступно по адресам /proc/<PID>/cmdline, /proc/<PID>/exe.

	Ответ: 
	/proc/[pid]/cmdline. В этом файле хранится командная строка, которой был запущен данный процесс
	/proc/[pid]/exe представляет собой символическую ссылку на исполняемый файл, который инициировал запуск процесса

11. Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo.

	Ответ: >cat /proc/cpuinfo |grep sse
	sse4_2


12. При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. 
Это можно подтвердить командой tty, которая упоминалась в лекции 3.2. Однако:

vagrant@netology1:~$ ssh localhost 'tty'
not a tty
Почитайте, почему так происходит, и как изменить поведение.

	Ответ:
	из man ssh  Pseudo-terminal will not be allocated because stdin is not a terminal.
    -t Force pseudo-terminal allocation.  This can be used to execute arbitrary screen-based programs on a remote machine, which can be
    very useful, e.g. when implementing menu services.  Multiple -t options force tty allocation, even if ssh has no local tty.
	для stdin параметр -t принудительно переопределяет tty, поэтому нужно запускать команду с параметром -t
	ssh localhost -t 'tty'

13. Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. 
Попробуйте сделать это, воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии.

	Ответ:
	man reptyr - Reparent a running program to a new terminal
	reptyr 3865
	reptyr -s 3865

14. sudo echo string > /root/new_file не даст выполнить перенаправление под обычным пользователем, 
так как перенаправлением занимается процесс shell'а, который запущен без sudo под вашим пользователем. 
Для решения данной проблемы можно использовать конструкцию echo string | sudo tee /root/new_file. 
Узнайте что делает команда tee и почему в отличие от sudo echo команда с sudo tee будет работать.

	Ответ: 
	из man tee - read from standard input and write to standard output and files
	тип программы echo встроенная, поэтому программа эхо выполняется от непривелигированного пользователя, 
	а тип программ tee файл, поэтому sudo tee выполняется от root и работает как надо.
	
